/* __________________________________
 * CSS sprites
 *
 * regular and retina support
 * __________________________________ */

=retina($ratio)
  @media only screen and (-webkit-min-device-pixel-ratio: $ratio),only screen and (min--moz-device-pixel-ratio: $ratio), only screen and (-o-min-device-pixel-ratio: $ratio / 1), only screen and (min-device-pixel-ratio: $ratio), only screen and (min-resolution: floor(72*$ratio)dpi), only screen and (min-resolution: #{$ratio}dppx)
    @content

.sprite
  display: block
  border: none
  margin: 0 // remove styling on anchor/button
  padding: 0
  background-color: transparent !important
  // background-color: #aae !important // DEBUG
  +content-box
  background-image: url('http://static.nocke.de/img/sprite/sprite1.png') !important
  +retina(1.3)
    background-image: url('http://static.nocke.de/img/sprite/sprite2.png') !important
    background-size: 480px 320px
  +retina(2.2)
    background-image: url('http://static.nocke.de/img/sprite/sprite4.png') !important
    background-size: 480px 320px

  &-xing, &-stackoverflow, &-github, &-medium, &-jekyll
    width: 80px
    height: 80px
  &-xing
    background-position: 0 -80px
    @at-root #{selector-append(a, &, ':focus')}, #{selector-append(a, &, ':hover')}
      background-position: 0 -160px
  &-stackoverflow
    background-position: -80px -80px
    @at-root #{selector-append(a, &, ':focus')}, #{selector-append(a, &, ':hover')}
      background-position: -80px -160px
  &-github
    background-position: -160px -80px
    @at-root #{selector-append(a, &, ':focus')}, #{selector-append(a, &, ':hover')}
      background-position: -160px -160px
  &-medium
    background-position: -240px -80px
    @at-root #{selector-append(a, &, ':focus')}, #{selector-append(a, &, ':hover')}
      background-position: -240px -160px
  &-jekyll
    background-position: -320px -160px
    // no hover version

  &-ribbon
    width: 160px
    height: 160px
    background-position: -320px 0
  
// use id for absolute positioning
a#ribbon
  position: fixed
  top: -8px
  right: -12px
  z-index: 40
  background-image: url('http://static.nocke.de/img/sprite/sprite2.png') !important
  background-size: 480px 320px
  &:focus, &:hover
    // benefit: adds on top of whatever position
    margin-top: -2px
  +below(s-m)
    top: -16px
    right: -24px

span.sprite, .inline.sprite
  display: inline-block  // roll back from above
  position: relative     // allow finetuning

